{% extends "base.html" %}

{% block content %}
<div class="max-w-md mx-auto mt-20 bg-white shadow-2xl rounded-2xl p-8">
  <h2 class="text-2xl font-bold text-center mb-6 text-indigo-700">🔒 Reset Your EventHive Password</h2>

  {% if message %}
    <p class="text-red-600 text-center mb-4">{{ message }}</p>
  {% endif %}

  <form method="POST">
    {% csrf_token %}

    <!-- Email -->
    <label class="block mb-2 text-sm font-semibold text-gray-700">Registered Email</label>
    <input type="email" name="email" required
           class="w-full px-4 py-2 mb-4 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-indigo-400"
           placeholder="Enter your registered email">

    <!-- New Password with Toggle -->
    <label class="block mb-2 text-sm font-semibold text-gray-700">New Password</label>
    <div class="relative mb-4">
      <input id="new_password" type="password" name="password" required
             class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-indigo-400"
             placeholder="Enter new password">
      <span class="absolute right-3 top-2.5 cursor-pointer toggle-password text-xl select-none" data-target="new_password">👁️</span>
    </div>

    <!-- Confirm Password with Toggle -->
    <label class="block mb-2 text-sm font-semibold text-gray-700">Confirm Password</label>
    <div class="relative mb-6">
      <input id="confirm_password" type="password" name="confirm" required
             class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-indigo-400"
             placeholder="Confirm new password">
      <span class="absolute right-3 top-2.5 cursor-pointer toggle-password text-xl select-none" data-target="confirm_password">👁️</span>
    </div>

    <!-- Submit -->
    <button type="submit"
            class="w-full bg-indigo-600 text-white py-2 rounded-md hover:bg-indigo-700 transition font-semibold">
      Reset Password
    </button>

    <!-- Back to Login -->
    <div class="text-sm text-center mt-4">
      <a href="{% url 'login' %}" class="text-indigo-600 hover:underline">Back to Login</a>
    </div>
  </form>
</div>

<script>
  // Toggle Password Visibility
  document.querySelectorAll(".toggle-password").forEach(icon => {
    icon.addEventListener("click", function() {
      const targetId = this.getAttribute("data-target");
      const input = document.getElementById(targetId);
      if (input.type === "password") {
        input.type = "text";
        this.textContent = "🙈";
      } else {
        input.type = "password";
        this.textContent = "👁️";
      }
    });
  });
</script>
{% endblock %}
