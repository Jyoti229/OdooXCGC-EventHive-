{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="hero" id="trick-detail-hero">
  <h1 class="magic-title">{{ trick.title }}</h1>
  <p class="typewriter">Category: {{ trick.category }}</p>
</div>

<section class="trick-detail-container">
  <div class="trick-detail-card">
    {% if trick.image %}
      <img src="{{ trick.image.url }}" alt="{{ trick.title }}">
    {% else %}
      <img src="{% static 'images/default_trick.jpg' %}" alt="Magic Trick">
    {% endif %}

    <div class="trick-info">
      <h2>{{ trick.title }}</h2>
      <p>{{ trick.description }}</p>

      {% if trick.materials %}
        <h4>ü™Ñ Materials Needed:</h4>
        <ul class="materials-list">
          {% for material in trick.materials.splitlines %}
            <li>‚ú® {{ material }}</li>
          {% endfor %}
        </ul>
      {% endif %}

      <div class="tags">
        <span class="badge">{{ trick.category }}</span>
        {% if trick.difficulty %}
          <span class="badge">Difficulty: {{ trick.difficulty }}</span>
        {% endif %}
      </div>

      <div class="btn-group">
        <a href="{% url 'trick_list' %}" class="magic-btn">‚¨Ö Go Back</a>
        <a href="{% url 'try_trick' trick.id %}" class="magic-btn">üé© Try This Trick</a>
      </div>

      {% if trick.video_url %}
        <div class="video-tutorial">
          <h3>üé• Tutorial Video</h3>
          <iframe width="100%" height="315" src="{{ trick.video_url|safe }}" frameborder="0" allowfullscreen></iframe>
        </div>
      {% endif %}
    </div>
  </div>
</section>

<section class="comments-section">
  <h2>‚≠ê User Reviews</h2>
  {% for comment in trick.comments.all %}
    <div class="comment">
      <p><strong>{{ comment.user.username }}</strong> rated {{ comment.rating }}/5</p>
      <p>{{ comment.content }}</p>
      <span class="timestamp">{{ comment.created_at|timesince }} ago</span>
    </div>
  {% empty %}
    <p>No reviews yet. Be the first to comment!</p>
  {% endfor %}
</section>

{% endblock %}
